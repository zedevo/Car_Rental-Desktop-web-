<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:CarRental.Desktop.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="600"
        x:Class="CarRental.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Aurum Veloce - Car Rental Management"
        Background="#1e1e1e">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Panel Background="#1e1e1e">
        <Grid ColumnDefinitions="Auto,*">
            <!-- Sidebar (Only visible when logged in) -->
            <Border Grid.Column="0" Background="#252525" Padding="20" Width="250" IsVisible="{Binding IsLoggedIn}">
                <StackPanel>
                    <TextBlock Text="AURUM VELOCE" FontSize="20" FontWeight="Bold" Margin="0,20,0,10" Foreground="Gold" HorizontalAlignment="Center"/>
                    <TextBlock Text="{Binding CurrentUserDisplay}" FontSize="12" Foreground="Gray" HorizontalAlignment="Center" Margin="0,0,0,30"/>
                    
                    <!-- Shared / Role-specific Navigation -->
                    <StackPanel Spacing="5">
                        <Button Classes="MenuButton" Content="Dashboard" Command="{Binding GoToDashboardCommand}" IsVisible="{Binding IsAdmin}"/>
                        
                        <Button Classes="MenuButton" Content="Operations Hub" Command="{Binding GoToOperationsCommand}" IsVisible="{Binding !IsAdmin}"/>
                        
                        <Button Classes="MenuButton" Content="Fleet Management" Command="{Binding GoToCarsCommand}" IsVisible="{Binding IsAdmin}"/>
                        <Button Classes="MenuButton" Content="Financials" Command="{Binding GoToExpensesCommand}" IsVisible="{Binding IsAdmin}"/>
                        
                        <Separator Height="1" Background="#22FFFFFF" Margin="0,10" IsVisible="{Binding IsAdmin}"/>
                        
                        <Button Classes="MenuButton" Content="Admin Panel (Logs)" Command="{Binding GoToAdminCommand}" IsVisible="{Binding IsAdmin}"/>
                    </StackPanel>
                    
                    <Button Classes="MenuButton" Content="Logout" Command="{Binding LogoutCommand}" VerticalAlignment="Bottom" Margin="0,50,0,0"/>
                </StackPanel>
            </Border>

            <!-- Main Content -->
            <Border Grid.Column="1" Padding="30" Background="#121212">
                <ContentControl Content="{Binding CurrentPage}" />
            </Border>
        </Grid>
    </Panel>

    <Window.Styles>
        <Style Selector="Button.MenuButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>
        <Style Selector="Button.MenuButton:hover /template/ ContentPresenter">
            <Setter Property="Background" Value="#22FFFFFF"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
    </Window.Styles>
</Window>
